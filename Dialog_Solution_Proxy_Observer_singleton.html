<html>
<head>
<title></title>
<style>

#overlay {
    visibility: hidden;
    position: absolute;
    left: 0px;
    top: 0px;
    width:100%;
    height:100%;
    text-align:center;
    z-index: 1000;
}

#overlay div {
    width:300px;
    margin: 100px auto;
    background-color: #fff;
    border:1px solid #000;
    padding:15px;
    text-align:center;
}

</style>
<script src="scripts/jquery-2.1.3.js"></script>

<script type="text/javascript">

function showHide() {
	el = document.getElementById("overlay");
	el.style.visibility = (el.style.visibility == "visible") ? "hidden" : "visible";
}

function Dialog(divId){
	this.buttons = ['<input type="button" value="cancel"/>','<input type="button" value="ok""/>'];
	this.divId=divId;
}

Dialog.prototype.render = function(){
	var dialogHtml="";
	for(index in this.buttons){
		dialogHtml = dialogHtml+this.buttons[index];
	}
	$("#"+this.divId).html("<div>"+dialogHtml+"</div>");
	$("#"+this.divId).css('visibility','visible');
	$("#"+this.divId+" input").click($.proxy(function(){
	       // this points to Dialog instance
			console.log("Proxy fired...");
			console.log(this.hide);
			this.hide();
	   },this));
	$("#"+this.divId).trigger("created", $("#"+this.divId));
}

Dialog.prototype.hide = function(){
	//This refers to "input tag" here
	//var dialog = $(this).closest("div");
	//dialog.hide();
	console.log("Hiding dialog");
	$("#"+this.divId).hide();
	$("#"+this.divId).trigger("hidden", $("#"+this.divId));
}

Dialog.prototype.on = function(eventName, handler){
	$("#"+this.divId).on(eventName, handler);
}

$(document).ready(function(){
	var singleDiag = SingletonDialog.getInstance("overlay");
	singleDiag.render();
	
	alert("Now going to hide");
	
	singleDiag2 = SingletonDialog.getInstance("overlay");
	singleDiag2.hide();
	
});

var SingletonDialog = (function() {
	var instance;
	function init(divId) {
		var buttons = ['<input type="button" value="cancel"/>','<input type="button" value="ok""/>'];
		
		return {
			render :  function(){
				var dialogHtml="";
				for(index in buttons){
					dialogHtml = dialogHtml+buttons[index];
				}
				$("#"+divId).html("<div>"+dialogHtml+"</div>");
				$("#"+divId).css('visibility','visible');
				$("#"+divId+" input").click(this.hide);
			},
			hide: function(){
				//This refers to "input tag" here
				var dialog = $(this).closest("div");
				dialog.hide();
				$("#"+divId).hide();
			}
			
		};
	};

	return {
		getInstance : function(divId) {
			if (!instance) {
				instance = init(divId);
			}
			return instance;
		}
	};
})();



</script>
</head>
<body>

<div id="overlay">
	<div>
	     <p><input type="button" value="cancel" onclick="showHide();"/><input type="button" value="ok" onclick="showHide();"/></p>
	</div>
</div>

<a href='#' onclick='overlay()'>Show dialog</a>

</body>
</html>