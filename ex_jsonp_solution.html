<!DOCTYPE html>
<html>
<head>
<!-- remove all records from view that have been deleted -->
<script src="scripts/jquery-2.1.3.js"></script>
<script type="text/javascript">

function showDetails(data) {
	var keys = Object.keys(data);
	var thumbUrl = data[keys[0]].thumbnail_url;
	console.log(thumbUrl);
	var imgTag = "<img src='"+thumbUrl+"'/>";
	$("#results").html(imgTag);
}


var apiUrl='https://openlibrary.org/api/books?&bibkeys=';

$(document).ready(function(){
	$("tr").each(function(index,elem){
		var id = $(elem).find("td").eq(1).text();
		console.log(id);
		var button = $(elem).find("td").eq(2);
		button.click(function(){
			//Create script tag
			var scriptTag = "<script src='https://openlibrary.org/api/books?&bibkeys=" + id + "&callback=showDetails'/>"
			$("#scripts").append(scriptTag);
		});
	});
});
</script>


</head>
<body>
<div id="scripts"></div>
<table>
<tr><td>Zen Sparks</td><td>ISBN:0385472579</td><td><input type="button" value="details"></td></tr>
<tr><td>Adventures of Tom Sawyer</td><td>LCCN:62019420</td><td><input type="button" value="details"></td></tr>
</table>
<div id="results">
</div>
</html>